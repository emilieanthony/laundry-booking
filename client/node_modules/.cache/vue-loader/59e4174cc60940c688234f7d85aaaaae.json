{"remainingRequest":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/emilieanthony/Projects/group-01-web/client/src/views/BookingsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/emilieanthony/Projects/group-01-web/client/src/views/BookingsView.vue","mtime":1634570692541},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIEAgaXMgYW4gYWxpYXMgdG8gL3NyYwppbXBvcnQgeyBBcGkgfSBmcm9tICdAL0FwaScKaW1wb3J0IFZ1ZSBmcm9tICd2dWUnCmltcG9ydCBQb3J0YWxWdWUgZnJvbSAncG9ydGFsLXZ1ZScKaW1wb3J0IHsgS2FsZW5kYXIgfSBmcm9tICdrYWxlbmRhci12dWUnCmltcG9ydCB7IEJOYXZiYXIgfSBmcm9tICdib290c3RyYXAtdnVlJwpWdWUudXNlKFBvcnRhbFZ1ZSkKVnVlLmNvbXBvbmVudCgnYi1uYXZiYXInLCBCTmF2YmFyKQoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdob21lJywKICBjb21wb25lbnRzOiB7CiAgICBLYWxlbmRhcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkTGF1bmRyeVJvb206ICcnLAogICAgICBvcHRpb25zOiBbCiAgICAgICAgeyB0ZXh0OiAnTm9ydGgnLCB2YWx1ZTogJ05vcnRoJyB9LAogICAgICAgIHsgdGV4dDogJ0Vhc3QnLCB2YWx1ZTogJ0Vhc3QnIH0sCiAgICAgICAgeyB0ZXh0OiAnU291dGgnLCB2YWx1ZTogJ1NvdXRoJyB9LAogICAgICAgIHsgdGV4dDogJ1dlc3QnLCB2YWx1ZTogJ1dlc3QnIH0KICAgICAgXSwKICAgICAgZGF0ZV9waWNrZXI6IHsKICAgICAgICB2YWx1ZTogJycKICAgICAgfSwKICAgICAgdGltZV9waWNrZXI6IHsKICAgICAgICB2YWx1ZTogJycKICAgICAgfSwKICAgICAgY2FsZW5kYXJfc2V0dGluZ3M6IHsKICAgICAgICBzdHlsZTogJ21hdGVyaWFsX2Rlc2lnbicsCiAgICAgICAgdmlld190eXBlOiB0aGlzLiRpc01vYmlsZSgpID8gJ2RheScgOiAnd2VlaycsCiAgICAgICAgY2VsbF9oZWlnaHQ6IDEwLAogICAgICAgIHNjcm9sbFRvTm93OiBmYWxzZSwKICAgICAgICBzdGFydF9kYXk6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICByZWFkX29ubHk6IHRydWUsCiAgICAgICAgb3ZlcmxhcDogdHJ1ZSwKICAgICAgICBoaWRlX2RheXM6IFs3XSwKICAgICAgICBwYXN0X2V2ZW50X2NyZWF0aW9uOiB0cnVlCiAgICAgIH0sCiAgICAgIGV2ZW50czogW10KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5nZXRBbGxCb29raW5ncygpCiAgICB9LCAxMDAwKQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QWxsQm9va2luZ3MoKSB7CiAgICAgIEFwaS5nZXQoJy9ib29raW5ncycpCiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgcmVzcG9uc2UuZGF0YS5ib29raW5ncy5mb3JFYWNoKGJvb2tpbmcgPT4geyAvLyBMb29wIHRocm91Z2ggYWxsIGJvb2tpbmdzIGZyb20gcmVzcG9uc2UgZnJvbSBzZXJ2ZXIKICAgICAgICAgICAgY29uc3QgdG8gPSBuZXcgRGF0ZShib29raW5nLmRhdGUpCiAgICAgICAgICAgIHRvLnNldEhvdXJzKHRvLmdldEhvdXJzKCkgKyAzKSAvLyBUaGUgc2xvdCBiZWNvbWVzIDMgaG91cnMKICAgICAgICAgICAgdGhpcy4ka2FsZW5kYXIuYWRkTmV3RXZlbnQoCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZnJvbTogbmV3IERhdGUoYm9va2luZy5kYXRlKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgdG86IHRvLnRvSVNPU3RyaW5nKCksCiAgICAgICAgICAgICAgICBkYXRhOiBib29raW5nLmxhdW5kcnlyb29tICsgJyBub3QgYXZhaWxhYmxlJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nLCB7CiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgYXV0b0hpZGVEZWxheTogNTAwMCwKICAgICAgICAgICAgYXBwZW5kVG9hc3Q6IHRydWUKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCgogICAgY3JlYXRlQm9va2luZyhldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIEFwaS5wb3N0KCd1c2Vycy8nICsgbG9jYWxTdG9yYWdlLnVzZXJJZCArICcvYm9va2luZ3MnLCB7CiAgICAgICAgZGF0ZTogdGhpcy5kYXRlX3BpY2tlci52YWx1ZSArICdUJyArIHRoaXMudGltZV9waWNrZXIudmFsdWUgKyAnWicsCiAgICAgICAgbGF1bmRyeXJvb206IHRoaXMuc2VsZWN0ZWRMYXVuZHJ5Um9vbQogICAgICB9KQogICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLicsIHsKICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsCiAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgICBhdXRvSGlkZURlbGF5OiA1MDAwLAogICAgICAgICAgICBhcHBlbmRUb2FzdDogdHJ1ZQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["BookingsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookingsView.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"fluid\">\n    <div class=\"header0\"></div>\n    <div class =\"container-booking\">\n      <div class=\"booking-form\">\n        <section>\n          <h1>Create new booking</h1>\n          <h6>Select a laundry room, date and start time. <br> * Each slot is three hours *</h6>\n        </section>\n      <b-form class=\"form\" @submit=\"createBooking\">\n        <div class =\"picker\">\n          <b-form-group label=\"Choose a laundry room: \" v-slot=\"{ ariaDescribedby }\">\n            <b-form-radio-group\n              id=\"radio-group-1\"\n              v-model=\"selectedLaundryRoom\"\n              :options=\"options\"\n              :aria-describedby=\"ariaDescribedby\"\n              name=\"radio-options\"\n            ></b-form-radio-group>\n        </b-form-group>\n        <div class=\"mt-3\">Selected: <strong>{{ selectedLaundryRoom }}</strong></div>\n        <div class =\"date-picker\">\n          <label for=\"example-datepicker\">Choose a date:</label>\n          <b-form-datepicker id=\"example-datepicker\" v-model=\"date_picker.value\" class=\"mb-2\"></b-form-datepicker>\n        </div>\n        <div class=\"time-picker\">\n          <label for=\"example-timepicker\">Choose a starting time:</label>\n          <b-form-timepicker v-bind:hour12=\"false\" v-model=\"time_picker.value\" locale=\"en\"></b-form-timepicker>\n        </div>\n        </div>\n        <div class=\"booking-button\">\n          <b-button type=\"submit\" variant=\"info\">Add new booking</b-button>\n        </div>\n      </b-form>\n   </div>\n   <div class=\"calendar-box\">\n     <h1> All bookings</h1>\n     <p>Here is an overview of all bookings</p>\n   <kalendar :configuration=\"calendar_settings\" :events.sync=\"events\" />\n </div>\n  </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { Api } from '@/Api'\nimport Vue from 'vue'\nimport PortalVue from 'portal-vue'\nimport { Kalendar } from 'kalendar-vue'\nimport { BNavbar } from 'bootstrap-vue'\nVue.use(PortalVue)\nVue.component('b-navbar', BNavbar)\n\nexport default {\n  name: 'home',\n  components: {\n    Kalendar\n  },\n  data() {\n    return {\n      selectedLaundryRoom: '',\n      options: [\n        { text: 'North', value: 'North' },\n        { text: 'East', value: 'East' },\n        { text: 'South', value: 'South' },\n        { text: 'West', value: 'West' }\n      ],\n      date_picker: {\n        value: ''\n      },\n      time_picker: {\n        value: ''\n      },\n      calendar_settings: {\n        style: 'material_design',\n        view_type: this.$isMobile() ? 'day' : 'week',\n        cell_height: 10,\n        scrollToNow: false,\n        start_day: new Date().toISOString(),\n        read_only: true,\n        overlap: true,\n        hide_days: [7],\n        past_event_creation: true\n      },\n      events: []\n    }\n  },\n  mounted() {\n    setTimeout(() => {\n      this.getAllBookings()\n    }, 1000)\n  },\n  methods: {\n    getAllBookings() {\n      Api.get('/bookings')\n        .then(response => {\n          response.data.bookings.forEach(booking => { // Loop through all bookings from response from server\n            const to = new Date(booking.date)\n            to.setHours(to.getHours() + 3) // The slot becomes 3 hours\n            this.$kalendar.addNewEvent(\n              {\n                from: new Date(booking.date).toISOString(),\n                to: to.toISOString(),\n                data: booking.laundryroom + ' not available'\n              }\n            )\n          })\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n    },\n\n    createBooking(event) {\n      event.preventDefault()\n      Api.post('users/' + localStorage.userId + '/bookings', {\n        date: this.date_picker.value + 'T' + this.time_picker.value + 'Z',\n        laundryroom: this.selectedLaundryRoom\n      })\n        .then(response => {\n          window.location.reload()\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n    }\n  }\n}\n</script>\n\n<style>\n\n.header0{\n  background-image: linear-gradient(rgba(3, 3, 3, 0.7), rgba(3, 3, 3, 0.7)), url(../assets/img-15.jpg);\n    background-size: cover;\n    background-position: center;\n    height: 50vh;\n    background-attachment: fixed;\n    color: white;\n}\n\n.container-booking{\ndisplay: flex;\njustify-content: center;\nflex-direction: column;\nmargin: 24px auto;\n}\n\n.booking-form{\n  width: 100%;\n  padding: 24px;\n  background-color: rgb(254, 254, 254);\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n @media screen and (max-width: 768px) {\n  .booking-form{\n    padding: 24px 0;\n  }\n}\n\n.booking-button{\n  margin: 24px;\n}\n\n.form{\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  }\n\n.date-picker{\n  max-width: 185px;\n}\n.picker{\n  width: 100%;\n  display: flex;\n  padding: 24px;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  background-color: #f6fbfc;\n  border-radius: 12px;\n}\n\n.calendar-box{\n  margin: 36px auto 0;\n  width: 90vw;\n}\n\np {\nfont-family: Verdana;\n}\n\n</style>\n"]}]}