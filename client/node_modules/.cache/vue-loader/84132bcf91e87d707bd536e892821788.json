{"remainingRequest":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/emilieanthony/Projects/group-01-web/client/src/views/BookingsView.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/emilieanthony/Projects/group-01-web/client/src/views/BookingsView.vue","mtime":1634659787474},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmhlYWRlcjB7CiAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHJnYmEoMywgMywgMywgMC43KSwgcmdiYSgzLCAzLCAzLCAwLjcpKSwgdXJsKC4uL2Fzc2V0cy9pbWctMTUuanBnKTsKICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7CiAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7CiAgICBoZWlnaHQ6IDUwdmg7CiAgICBiYWNrZ3JvdW5kLWF0dGFjaG1lbnQ6IGZpeGVkOwogICAgY29sb3I6IHdoaXRlOwp9CgpAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjhweCkgewogIC5oZWFkZXIwIHsKICAgIGRpc3BsYXk6IG5vbmU7CiAgfQp9CgouY29udGFpbmVyLWJvb2tpbmd7CmRpc3BsYXk6IGZsZXg7Cmp1c3RpZnktY29udGVudDogY2VudGVyOwpmbGV4LWRpcmVjdGlvbjogY29sdW1uOwptYXJnaW46IDI0cHggYXV0bzsKfQoKLmJvb2tpbmctZm9ybXsKICB3aWR0aDogMTAwJTsKICBwYWRkaW5nOiAyNHB4OwogIGJhY2tncm91bmQtY29sb3I6IHJnYigyNTQsIDI1NCwgMjU0KTsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKfQoKIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7CiAgLmJvb2tpbmctZm9ybXsKICAgIHBhZGRpbmc6IDI0cHggMDsKICB9Cn0KCi5ib29raW5nLWJ1dHRvbnsKICBtYXJnaW46IDI0cHg7Cn0KCi5mb3JtewogIHdpZHRoOiAxMDAlOwogIGRpc3BsYXk6IGZsZXg7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIH0KCi5kYXRlLXBpY2tlcnsKICBtYXgtd2lkdGg6IDE4NXB4Owp9Ci5waWNrZXJ7CiAgd2lkdGg6IDEwMCU7CiAgZGlzcGxheTogZmxleDsKICBwYWRkaW5nOiAyNHB4OwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjZmYmZjOwogIGJvcmRlci1yYWRpdXM6IDEycHg7Cn0KCi5jYWxlbmRhci1ib3h7CiAgbWFyZ2luOiAzNnB4IGF1dG8gMDsKICB3aWR0aDogOTB2dzsKfQoKcCB7CmZvbnQtZmFtaWx5OiBWZXJkYW5hOwp9Cgo="},{"version":3,"sources":["BookingsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"BookingsView.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"fluid\">\n    <div class=\"header0\"></div>\n    <div class =\"container-booking\">\n      <div class=\"booking-form\">\n        <section>\n          <h1>Create new booking</h1>\n          <h6>Select a laundry room, date and start time. <br> * Each slot is three hours *</h6>\n        </section>\n      <b-form class=\"form\" @submit=\"createBooking\">\n        <div class =\"picker\">\n          <b-form-group label=\"Choose a laundry room: \" v-slot=\"{ ariaDescribedby }\">\n            <b-form-radio-group\n              id=\"radio-group-1\"\n              v-model=\"selectedLaundryRoom\"\n              :options=\"options\"\n              :aria-describedby=\"ariaDescribedby\"\n              name=\"radio-options\"\n            ></b-form-radio-group>\n        </b-form-group>\n        <div class=\"mt-3\">Selected: <strong>{{ selectedLaundryRoom }}</strong></div>\n        <div class =\"date-picker\">\n          <label for=\"example-datepicker\">Choose a date:</label>\n          <b-form-datepicker id=\"example-datepicker\" v-model=\"date_picker.value\" class=\"mb-2\"></b-form-datepicker>\n        </div>\n        <div class=\"time-picker\">\n          <label for=\"example-timepicker\">Choose a starting time:</label>\n          <b-form-timepicker v-bind:hour12=\"false\" v-model=\"time_picker.value\" locale=\"en\"></b-form-timepicker>\n        </div>\n        </div>\n        <div class=\"booking-button\">\n          <b-button type=\"submit\" variant=\"info\">Add new booking</b-button>\n        </div>\n      </b-form>\n   </div>\n   <div class=\"calendar-box\">\n     <h1> All bookings</h1>\n     <p>Here is an overview of all bookings</p>\n   <kalendar :configuration=\"calendar_settings\" :events.sync=\"events\" />\n </div>\n  </div>\n  </div>\n</template>\n\n<script>\n// @ is an alias to /src\nimport { Api } from '@/Api'\nimport Vue from 'vue'\nimport PortalVue from 'portal-vue'\nimport { Kalendar } from 'kalendar-vue'\nimport { BNavbar } from 'bootstrap-vue'\nVue.use(PortalVue)\nVue.component('b-navbar', BNavbar)\n\nexport default {\n  name: 'home',\n  components: {\n    Kalendar\n  },\n  data() {\n    return {\n      selectedLaundryRoom: '',\n      options: [\n        { text: 'North', value: 'North' },\n        { text: 'East', value: 'East' },\n        { text: 'South', value: 'South' },\n        { text: 'West', value: 'West' }\n      ],\n      date_picker: {\n        value: ''\n      },\n      time_picker: {\n        value: ''\n      },\n      calendar_settings: {\n        style: 'material_design',\n        view_type: this.$isMobile() ? 'day' : 'week',\n        cell_height: 10,\n        scrollToNow: false,\n        start_day: new Date().toISOString(),\n        read_only: true,\n        overlap: true,\n        hide_days: [7],\n        past_event_creation: true\n      },\n      events: []\n    }\n  },\n  mounted() {\n    setTimeout(() => {\n      this.getAllBookings()\n    }, 1000)\n  },\n  methods: {\n    getAllBookings() {\n      Api.get('/bookings')\n        .then(response => {\n          response.data.bookings.forEach(booking => { // Loop through all bookings from response from server\n            const to = new Date(booking.date)\n            to.setHours(to.getHours() + 3) // The slot becomes 3 hours\n            this.$kalendar.addNewEvent(\n              {\n                from: new Date(booking.date).toISOString(),\n                to: to.toISOString(),\n                data: booking.laundryroom + ' not available'\n              }\n            )\n          })\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n    },\n\n    createBooking(event) {\n      event.preventDefault()\n      Api.post('users/' + localStorage.userId + '/bookings', {\n        date: this.date_picker.value + 'T' + this.time_picker.value + 'Z',\n        laundryroom: this.selectedLaundryRoom\n      })\n        .then(response => {\n          this.createNotification()\n          window.location.reload()\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n    },\n    createNotification(event) {\n      Api.post('users/' + localStorage.userId + '/notifications', {\n        content: 'This is a reminder of your booked laundry time slot: ' + this.date_picker.value + ' ' + this.time_picker.value,\n        laundryroom: this.selectedLaundryRoom\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n.header0{\n  background-image: linear-gradient(rgba(3, 3, 3, 0.7), rgba(3, 3, 3, 0.7)), url(../assets/img-15.jpg);\n    background-size: cover;\n    background-position: center;\n    height: 50vh;\n    background-attachment: fixed;\n    color: white;\n}\n\n@media screen and (max-width: 768px) {\n  .header0 {\n    display: none;\n  }\n}\n\n.container-booking{\ndisplay: flex;\njustify-content: center;\nflex-direction: column;\nmargin: 24px auto;\n}\n\n.booking-form{\n  width: 100%;\n  padding: 24px;\n  background-color: rgb(254, 254, 254);\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n @media screen and (max-width: 768px) {\n  .booking-form{\n    padding: 24px 0;\n  }\n}\n\n.booking-button{\n  margin: 24px;\n}\n\n.form{\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  }\n\n.date-picker{\n  max-width: 185px;\n}\n.picker{\n  width: 100%;\n  display: flex;\n  padding: 24px;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  background-color: #f6fbfc;\n  border-radius: 12px;\n}\n\n.calendar-box{\n  margin: 36px auto 0;\n  width: 90vw;\n}\n\np {\nfont-family: Verdana;\n}\n\n</style>\n"]}]}