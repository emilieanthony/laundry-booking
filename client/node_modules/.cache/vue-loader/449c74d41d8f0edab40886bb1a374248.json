{"remainingRequest":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/emilieanthony/Projects/group-01-web/client/src/views/Note.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/emilieanthony/Projects/group-01-web/client/src/views/Note.vue","mtime":1634659787475},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/emilieanthony/Projects/group-01-web/client/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEFwaSB9IGZyb20gJ0AvQXBpJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdub3RlJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbm90ZXM6IFtdLAogICAgICBmb3JtOiB7CiAgICAgICAgaGVhZGxpbmU6ICcnLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIHdyaXRlcjogJycKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkTm90ZShldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpCiAgICAgIEFwaS5wb3N0KCdub3RlcycsIHRoaXMuZm9ybSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmdldEFsbE5vdGVzKCkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nLCB7CiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgYXV0b0hpZGVEZWxheTogNTAwMCwKICAgICAgICAgICAgYXBwZW5kVG9hc3Q6IHRydWUKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgICAgdGhpcy5mb3JtLmhlYWRsaW5lID0gJycKICAgICAgdGhpcy5mb3JtLmNvbnRlbnQgPSAnJwogICAgICB0aGlzLmZvcm0ud3JpdGVyID0gJycKICAgIH0sCiAgICBkZWxldGVOb3RlcygpIHsKICAgICAgQXBpLmRlbGV0ZSgnbm90ZXMnKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuZ2V0QWxsTm90ZXMoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJGJ2VG9hc3QudG9hc3QoJ1NvbWV0aGluZyB3ZW50IHdyb25nLiBQbGVhc2UgdHJ5IGFnYWluLicsIHsKICAgICAgICAgICAgdGl0bGU6ICdFcnJvcicsCiAgICAgICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgICAgICBhdXRvSGlkZURlbGF5OiA1MDAwLAogICAgICAgICAgICBhcHBlbmRUb2FzdDogdHJ1ZQogICAgICAgICAgfSkKICAgICAgICB9KQogICAgfSwKICAgIGRlbGV0ZU5vdGVCeUlkKGlkKSB7CiAgICAgIEFwaS5kZWxldGUoJ25vdGVzLycgKyBpZCkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMubm90ZXMuZmluZEluZGV4KG5vdGUgPT4gbm90ZS5faWQgPT09IGlkKQogICAgICAgICAgdGhpcy5ub3Rlcy5zcGxpY2UoaW5kZXgsIDEpCiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgnU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uJywgewogICAgICAgICAgICB0aXRsZTogJ0Vycm9yJywKICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6IDUwMDAsCiAgICAgICAgICAgIGFwcGVuZFRvYXN0OiB0cnVlCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAogICAgZWRpdE5vdGUoaWQsIGNvbnRlbnQsIGluZGV4KSB7CiAgICAgIEFwaS5wYXRjaCgnbm90ZXMvJyArIGlkLCB7IGNvbnRlbnQgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdCgnU29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uJywgewogICAgICAgICAgICB0aXRsZTogJ0Vycm9yJywKICAgICAgICAgICAgdmFyaWFudDogJ2RhbmdlcicsCiAgICAgICAgICAgIGF1dG9IaWRlRGVsYXk6IDUwMDAsCiAgICAgICAgICAgIGFwcGVuZFRvYXN0OiB0cnVlCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIC8vIEhpZGUgZm9ybSBmb3Igbm90ZQogICAgICB0aGlzLiRzZXQodGhpcy5ub3Rlc1tpbmRleF0sICdlZGl0JywgZmFsc2UpCiAgICB9LAogICAgZ2V0QWxsTm90ZXMoKSB7CiAgICAgIEFwaS5nZXQoJ25vdGVzJykKICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgIC8vIG1hcCBlYWNoIG5vdGUgZnJvbSBiYWNrZW5kIHRvIGFsc28gaGF2ZSBlZGl0ID0gZmFsc2UgcHJvcGVydHkgYWZ0ZXIgZmV0Y2hpbmcgdGhlbQogICAgICAgICAgdGhpcy5ub3RlcyA9IHJlc3BvbnNlLmRhdGEubm90ZXMubWFwKChub3RlKSA9PiAoeyAuLi5ub3RlLCBlZGl0OiBmYWxzZSB9KSkKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLiRidlRvYXN0LnRvYXN0KCdTb21ldGhpbmcgd2VudCB3cm9uZy4gUGxlYXNlIHRyeSBhZ2Fpbi4nLCB7CiAgICAgICAgICAgIHRpdGxlOiAnRXJyb3InLAogICAgICAgICAgICB2YXJpYW50OiAnZGFuZ2VyJywKICAgICAgICAgICAgYXV0b0hpZGVEZWxheTogNTAwMCwKICAgICAgICAgICAgYXBwZW5kVG9hc3Q6IHRydWUKICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCiAgICAvLyBzZXQgYSBub3RlIHRvIGVkaXQgbW9kZSAoc2hvdyBmb3JtIGZvciBhIG5vdGUuIFRvZ2dsZSBVSSkKICAgIHNldE5vdGVFZGl0TW9kZShpbmRleCkgewogICAgICB0aGlzLiRzZXQodGhpcy5ub3Rlc1tpbmRleF0sICdlZGl0JywgIXRoaXMubm90ZXNbaW5kZXhdLmVkaXQpCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5nZXRBbGxOb3RlcygpCiAgfQp9Cgo="},{"version":3,"sources":["Note.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Note.vue","sourceRoot":"src/views","sourcesContent":["<template>\n<div class=\"container-note\">\n  <div class=\"header3\">\n    <div class=\"header3-text\">\n    <h1>Community Board</h1>\n    <p id=\"share\">Share your thoughts with your neighbours!</p>\n    </div>\n    </div>\n    <h1 class=\"desktop-hidden\">Community Board</h1>\n    <div class =\"note-form\">\n     <b-form @submit=\"addNote\">\n    <b-form-group id = \"input-group-1\" label =\"Headline\">\n      <b-form-input id= \"input-1\" v-model=\"form.headline\" type=\"text\" placeholder=\"Enter a headline\">\n      </b-form-input>\n    </b-form-group>\n    <b-form-group id =\"input-group-2\" label =\"Content\">\n      <b-form-textarea\n      id=\"textarea\"\n      v-model=\"form.content\"\n      placeholder=\"Enter something...\"\n      rows=\"3\"\n      max-rows=\"6\"\n    ></b-form-textarea>\n    </b-form-group>\n    <b-form-group id=\"input-group-3\" label=\"Name\">\n    <b-form-input v-model=\"form.writer\" type=\"text\" placeholder=\"Enter your name\"></b-form-input>\n    </b-form-group>\n    <b-button type=\"submit\" variant=\"info\">Add new note</b-button>\n  </b-form>\n  </div>\n  <div class=\"container-cards\">\n  <b-card-group v-for=\"(note, index) in notes\" :key=\"note._id\">\n    <b-card v-bind:title=\"note.headline\">\n      <b-icon-pencil-square v-on:click=\"setNoteEditMode(index)\"></b-icon-pencil-square>\n      <!-- Show form if note.edit is true -->\n      <b-form @submit=\"editNote(note._id, note.content, index)\" v-if=\"note.edit === true\">\n        <b-form-textarea\n        id=\"textarea\"\n        v-model=\"note.content\"\n        placeholder=\"Enter something...\"\n        rows=\"3\"\n        max-rows=\"6\"\n        ></b-form-textarea>\n        <b-button type=\"submit\" variant=\"info\">Save</b-button>\n      </b-form>\n       <!-- if note.edit is false, show simple content -->\n      <b-card-text v-else> {{ note.content }}</b-card-text>\n      <b-card-text>{{ note.writer }}</b-card-text>\n      <div class=\"button-form\">\n      <router-link v-bind:to=\"'notes/' + note._id\">\n        <b-button type =\"submit\" variant=\"outline-info\">Edit note</b-button>\n      </router-link>\n      <b-form @submit=\"deleteNoteById(note._id, index)\">\n    <b-button id=\"delete\" type =\"submit\" variant=\"danger\">Delete</b-button>\n    </b-form>\n      </div>\n    </b-card>\n  </b-card-group>\n  </div>\n  <div class=\"button-form\">\n    <b-form @submit=\"deleteNotes\">\n    <b-button type=\"submit\" variant=\"danger\">Delete all notes</b-button>\n    </b-form>\n  </div>\n</div>\n</template>\n\n<script>\nimport { Api } from '@/Api'\n\nexport default {\n  name: 'note',\n  data() {\n    return {\n      notes: [],\n      form: {\n        headline: '',\n        content: '',\n        writer: ''\n      }\n    }\n  },\n  methods: {\n    addNote(event) {\n      event.preventDefault()\n      Api.post('notes', this.form)\n        .then(() => {\n          this.getAllNotes()\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n      this.form.headline = ''\n      this.form.content = ''\n      this.form.writer = ''\n    },\n    deleteNotes() {\n      Api.delete('notes')\n        .then(() => {\n          this.getAllNotes()\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n    },\n    deleteNoteById(id) {\n      Api.delete('notes/' + id)\n        .then(() => {\n          const index = this.notes.findIndex(note => note._id === id)\n          this.notes.splice(index, 1)\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n    },\n    editNote(id, content, index) {\n      Api.patch('notes/' + id, { content })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n      // Hide form for note\n      this.$set(this.notes[index], 'edit', false)\n    },\n    getAllNotes() {\n      Api.get('notes')\n        .then((response) => {\n          // map each note from backend to also have edit = false property after fetching them\n          this.notes = response.data.notes.map((note) => ({ ...note, edit: false }))\n        })\n        .catch(() => {\n          this.$bvToast.toast('Something went wrong. Please try again.', {\n            title: 'Error',\n            variant: 'danger',\n            autoHideDelay: 5000,\n            appendToast: true\n          })\n        })\n    },\n    // set a note to edit mode (show form for a note. Toggle UI)\n    setNoteEditMode(index) {\n      this.$set(this.notes[index], 'edit', !this.notes[index].edit)\n    }\n  },\n  mounted() {\n    this.getAllNotes()\n  }\n}\n\n</script>\n\n<style>\n.header3{\n   background-image: linear-gradient(rgba(3, 3, 3, 0.7), rgba(3, 3, 3, 0.7)), url(../assets/img-14.jpg);\n    background-size: cover;\n    background-position: center;\n    height: 50vh;\n    background-attachment: fixed;\n    color: white;\n}\n\n@media screen and (max-width: 768px) {\n  .header3 {\n    display: none;\n  }\n}\n\n@media screen and (min-width: 768px) {\n  .desktop-hidden{\n    display: none;\n  }\n}\n\n.header3-text{\nheight: 100%;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: column;\n}\n\n.container-note{\ndisplay: flex;\njustify-content: center;\nflex-direction: column;\nmargin: 12px;\n}\n\n.note-form{\n  margin: 64px;\n}\n\n.button-form{\nmargin: 24px 0 auto;\npadding: 8px;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-direction: row;\n}\n\n#delete{\n  margin: 12px;\n}\n\n.container-cards{\n  display: flex;\n  flex-direction: row;\n  justify-self: flex-start, space-evenly;\n  flex-wrap: wrap;\n  align-items: stretch;\n  align-content: flex-start;\n  row-gap: 20px;\n  column-gap: 20px;\n}\n\n.card-group{\nwidth: 32%;\n}\n\n@media screen and (max-width: 1050px) {\n  .container-cards {\n    flex-direction: column;\n  }\n  .card-group {\n    width: 100%;\n  }\n}\n</style>\n"]}]}